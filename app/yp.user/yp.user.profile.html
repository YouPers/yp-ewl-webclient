<ng-include src="'dhc/subnavbar.html'">
</ng-include>
<div class="container">

<form name="profileForm" ypModel="profileUserObj" class="form" role="form" ng-submit="saveProfile()" novalidate>

<div class="row">
    <div class="col-md-11">
        <h2 translate>profileForm.profile.header</h2>
    </div>
    <div class="col-md-1">
        </br>
        <button type="submit" class="btn btn-success btn-sm" ng-disabled="profileForm.$invalid" translate>
            profileForm.submit
        </button>
    </div>
</div>

<div class="row">

<div class="col-md-12">

<accordion close-others="true">

<accordion-group heading="{{ 'profileForm.profile.header' | translate }}" is-open="true" class="user-profile">

    <div class="col-md-6">

        <div class="row">

            <div class="col-md-12">

                <div class="avatar-form">

                    <avatar-upload avatar-object="avatarObject">


                        <span class="dropdown" on-toggle="toggled(open)">
                              <a href class="dropdown-toggle">
                                  <span translate>profileForm.avatar.change</span>
                              </a>
                              <ul class="dropdown-menu">
                                  <li>
                                      <a href ng-click="avatarUpload()">
                                          <span translate>profileForm.avatar.upload</span>
                                      </a>
                                  </li>
                                  <li ng-hide="isDefaultAvatar()">
                                      <a href ng-click="defaultAvatar($event)">
                                          <span translate>profileForm.avatar.default</span>
                                      </a>
                                  </li>
                              </ul>
                        </span>

                    </avatar-upload>


                </div>

            </div>

        </div>


        <div class="row">

            <div class="form-group">
                <div class="col-md-4">
                    <label translate>profileForm.gender.label</label>
                </div>
                <div class="col-md-8">
                    <div class="btn-group" data-toggle="buttons-radio">
                        <input id="female" type="radio" value="female" ng-model="profileUserObj.gender"
                               ng-click="profileUserObj.gender = 'female'"><label for="female">&NonBreakingSpace;{{ 'gender.female' | translate }}</label></input></br>
                        <input id="male" type="radio" value="male" ng-model="profileUserObj.gender"
                               ng-click="profileUserObj.gender = 'male'"><label for="male">&NonBreakingSpace;{{ 'gender.male' | translate }}</label></input></br>
                    </div>
                </div>
            </div>
        </div>
        </br>

        <div class="row">
            <div class="form-group">
                <div class="col-md-4">
                    <label translate>profileForm.birthdate.label</label>
                </div>
                <div class="col-md-4">
                    <!--ToDo internationalized date check and or date Picker-->
                    <input name="birthDate" type="text" placeholder="tt.mm.jjjj" class="form-control"
                           ng-model="profileUserObj.birthDate">
                    <span ng-show="profileForm.birthDate.$dirty && profileForm.birthDate.$invalid" class="help-inline"
                          translate>profileForm.birthdate.$invalid</span>
                </div>
            </div>
        </div>

        <div class="row">
            </br>
            <div class="col-md-4">
                <label translate>profileForm.maritalStatus.label</label>
            </div>
            <div class="col-md-4">
                <select ng-model="profileUserObj.maritalStatus" ng-options="'maritalStatus.' + value | translate for value in enums.maritalStatus">
                </select>
            </div>
        </div>
        </br>
    </div>

    <div class="col-md-6">

        <div class="form-group">
            <label translate>profileForm.homeAddress.header</label>

            <div class="row">
                <div class="col-md-9">
                    <yp-input name="homeAddress.street" label="false"></yp-input>
                </div>

                <div class="col-md-3">
                    <yp-input name="homeAddress.houseNumber" label="false"></yp-input>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <yp-input name="homeAddress.zipCode" label="false"></yp-input>
                </div>

                <div class="col-md-9">
                    <yp-input name="homeAddress.city" label="false"></yp-input>
                </div>
            </div>


            <yp-input name="homeAddress.country" label="false"></yp-input>

        </div>

        <div class="form-group">
            <label translate>profileForm.workAddress.header</label>

            <div class="row">
                <div class="col-md-9">
                    <yp-input name="workAddress.street" label="false"></yp-input>
                </div>

                <div class="col-md-3">
                    <yp-input name="workAddress.houseNumber" label="false"></yp-input>
                </div>
            </div>

            <div class="row">
                <div class="col-md-3">
                    <yp-input name="workAddress.zipCode" label="false"></yp-input>
                </div>

                <div class="col-md-9">
                    <yp-input name="workAddress.city" label="false"></yp-input>
                </div>
            </div>

            <yp-input name="workAddress.country" label="false"></yp-input>
        </div>

    </div>


</accordion-group>

<accordion-group heading="{{ 'profileForm.settings.header' | translate }}" is-open="true">

    <div class="col-md-6">

        <div class="form-group">
            <label translate>profileForm.defaultWorkWeek</label>

            <div class="row">
                <div class="col-md-3" ng-repeat="weekday in enums.weekday">
                    <div class="input-group">
                         <span class="input-group-addon">
                              <input name="{{'defWeekForScheduling'+weekday}}" type="checkbox"
                                     ng-model="profileUserObj.userPreferences.defaultUserWeekForScheduling[weekday]">&NonBreakingSpace;{{ 'weekday.'+weekday | translate }}
                         </span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <label translate>profileForm.firstDayOfWeek</label>
                </div>
                <div class="col-md-8">
                    <div class="btn-group" data-toggle="buttons-radio">
                        <input type="radio" value="Monday" ng-model="profileUserObj.userPreferences.firstDayOfWeek"
                               ng-click="profileUserObj.userPreferences.firstDayOfWeek = 'Monday'">&NonBreakingSpace;{{
                        'weekday.sunday' | translate }} <br/></input>
                        <input type="radio" value="Sunday" ng-model="profileUserObj.userPreferences.firstDayOfWeek"
                               ng-click="profileUserObj.userPreferences.firstDayOfWeek = 'Sunday'">&NonBreakingSpace;{{
                        'weekday.monday' | translate }}</input>
                    </div>
                </div>
            </div>

        </div>

        <div class="col-md-6">
            <div class="row">
                <div class="col-md-6">
                    <label translate>profileForm.timeZone</label>
                </div>

                <div class="col-md-6">
                    <select ng-model="profileUserObj.userPreferences.timezone" ng-options="'timezone.'+value | translate for value in enums.timezone">
                    </select>
                </div>

            </div>
        </div>
        <div class="col-md-6">
            <div class="row">
                <div class="col-md-6">
                    <label translate>profileForm.language</label>
                </div>

                <div class="col-md-6">
                    <select ng-model="profileUserObj.language" ng-options="'language.'+value | translate for value in enums.language">
                    </select>
                </div>

            </div>
        </div>


    </div>
    <div class="col-md-6">
        <div class="form-group">
            <label translate>profileForm.emailNotificationsSettings</label>
            <div class="row">
                <div class="col-md-6" ng-repeat="(emailsetting, value) in profileUserObj.userPreferences.email">
                    <div class="input-group">
                         <span class="input-group-addon">
                              <input name="{{'email.'+emailsetting}}" type="checkbox"
                                     ng-model="profileUserObj.userPreferences.email[emailsetting]">&NonBreakingSpace;{{ 'profileForm.email.'+emailsetting | translate }}
                         </span>
                    </div>
                </div>
            </div>
            <label translate>profileForm.calendarNotificationSettings</label>
            <div class="row">
                <div class="col-md-6">
                    <select ng-model="profileUserObj.userPreferences.calendarNotification" ng-options="'calendarNotification.'+ setting | translate for setting in enums.calendarNotifications">
                    </select>
                </div>
            </div>
        </div>
    </div>

</accordion-group>
<accordion-group heading="{{ 'profileForm.rejectedActivities.header' | translate }}" is-open="true">
    <div class="col-md-4" ng-repeat="recAct in profileUserObj.userPreferences.rejectedActivities">
        <div class="row">
            <div class="col-md-8">  {{activities.byId(recAct.activity).title}}</div>
            <div class="col-md-4"> <a class="btn btn-sm btn-primary" ng-click="reactivateActivity(recAct)">wieder aktivieren</a></div>
        </div>
    </div>
</accordion-group>

</accordion>
</div>


</div>
</form>


</div>