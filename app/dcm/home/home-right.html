<div ng-controller="HomeMessagesController">
    <h4 translate>dcmhome.messages</h4>
    <button class="btn btn-default" ng-click="options.composeMessage = true" ng-show="!options.composeMessage"
            translate>composeMessageForm.show
    </button>

    <div ng-if="options.composeMessage">
        <form name="composeMessageForm" class="form-horizontal" ng-submit="saveMessage(message)">

            <input class="form-control" ng-model="message.title" required
                   placeholder="{{ 'composeMessageForm.title.placeholder' | translate }}"/>
            <textarea class="form-control" ng-model="message.text" required
                      placeholder="{{ 'composeMessageForm.text.placeholder' | translate }}"></textarea>

            <div>
                <label translate>composeMessageForm.publishFrom.label</label>
                <date-picker date="message.publishFrom"></date-picker>
            </div>

            <div>
                <label translate>composeMessageForm.publishTo.label</label>
                <date-picker date="message.publishTo"></date-picker>
            </div>

            <br/>

            <button class="btn btn-primary pull-right" type="submit" ng-disabled="composeMessageForm.$invalid"
                    translate>composeMessageForm.submit
            </button>
            <div class="clearfix"></div>

        </form>

    </div>
    <div class="campaignMessages">
        <li class="list-group-item offerCampaignLead"
            ng-repeat="socialInteraction in messages"
            ng-click="openSocialInteraction(socialInteraction)">


            <div class="author sheet tertiary">

                <div class="image">
                    <img ng-src="{{ socialInteraction.author.avatar }}">
                </div>

                <div class="info">
                    <div class="authorType">{{ 'socialInteraction.header.' + socialInteraction.__t + '.' +
                        socialInteraction.authorType | translate }}
                    </div>
                    <div class="author">{{ socialInteraction.author.fullname }}</div>
                </div>

            </div>
            <div class="sheet secondary">
                <div class="date">{{ (socialInteraction.publishFrom || socialInteraction.created) | fromNow }}</div>
            </div>

            <div class="content sheet secondary">
                <div class="ref-title" ng-if="socialInteraction.refDocs.length > 0">{{
                    socialInteraction.refDocs[0].doc.title }}
                </div>
                <div class="title" ng-if="socialInteraction.title">{{ socialInteraction.title }}</div>
                <div class="text" ng-if="socialInteraction.text">{{ socialInteraction.text }}</div>
            </div>

        </li>
    </div>
</div>