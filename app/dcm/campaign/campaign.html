<div class="three-column-layout">

    <section>
        <div class="main-header">
            <div translate>campaign.preview.header</div>
        </div>
        <campaign-card campaign="campaign"></campaign-card>

    </section>

    <section>
        <form name="campaignForm" ypModel="campaign" role="form" class="form-horizontal"
              ng-submit="saveCampaign()" novalidate>
            <div class="col-md-12">
            <div class="form-group">
                <label class="control-label" translate>campaignForm.topic.label</label>

                <p>{{campaign.topic.name |uppercase}}: {{campaign.topic.shortDescription}}
                    <a ui-sref="dcm.topics"
                       translate
                       ng-if="!campaign.id">campaignForm.topic.change</a>
                </p>
            </div>
            <yp-input name="participants"></yp-input>
            <yp-input name="location"></yp-input>
            <yp-input name="city"></yp-input>
            <yp-input name="slogan"></yp-input>

            <div class="form-group date">
                <label class="control-label" translate>campaignForm.start.label</label>

                <div class="start">
                    <date-picker date="campaign.start"></date-picker>
                </div>

                <div class="end">
                    <date-picker date="campaign.end"></date-picker>
                </div>
            </div>
            </div>
        </form>
        <div class="row">
            <div class="col-md-12">
                <div class="main-header">
                    <div translate>campaign.preview.welcomeLink</div>
                </div>
                <div translate>campaign.preview.welcomeLinkExplain</div>
                <div class="welcome-link" select-on-click ng-show="campaign.id">{{ $state.href('welcome',{campaignId:
                    campaign.id}, {absolute: true})}}
                </div>
                <div translate ng-hide="campaign.id">campaign.preview.welcomeLinkNotSaved</div>

            </div>
        </div>

        <div ng-show="campaign.id">
            <div class="row">
                <div class="col-md-12">
                    <div translate class="main-header">campaign.campaignLeads.header</div>
                </div>
            </div>
            <div class="row campaign-leads" ng-repeat="campaignLead in campaign.campaignLeads">
                <div class="col-md-1">
                    <img ng-src="{{campaignLead.avatar}}">
                </div>
                <div class="col-md-4">
                    <div>{{ campaignLead.fullname }}</div>
                </div>
                <div class="col-md-4">
                    <div>{{ campaignLead.email }}</div>
                </div>
            </div>


            <div class="row invite-campaign-lead" ng-show="formVisible">
                <div class="col-md-12">

                    <div translate ng-if="invitationSent">inviteCampaignLeadForm.invitationSent</div>

                    <form class="form-inline" ng-if="!invitationSent"
                          role="form"
                          ng-submit="inviteCampaignLeadForm.$valid && inviteCampaignLead(campaignLeads, campaign)"
                          name="inviteCampaignLeadForm">
                        <div class="form-group"
                             ng-class="{'has-error': inviteCampaignLeadForm.email.$dirty && inviteCampaignLeadForm.email.$invalid}">
                            <label class="sr-only" translate>inviteCampaignLeadForm.email.label</label>
                            <input class="form-control email-field" name="email" type="text"
                                   ng-model="campaignLeads"
                                   placeholder="{{'inviteCampaignLeadForm.email.placeholder' | translate}}"
                                   multiple-Emails required>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary"
                                    ng-disabled="inviteCampaignLeadForm.$invalid"
                                    translate>inviteCampaignLeadForm.inviteSubmit
                            </button>
                        </div>
                    </form>

                </div>
            </div>

            <button class="btn btn-default" ng-click="showForm()"
                    translate>
                campaign.campaignLeads.add
            </button>
        </div>
    </section>

    <section>
        <div class="actions">
            <button ng-click="saveCampaign()" class="btn btn-primary backToGame" ng-disabled="campaignForm.$invalid">
                <span translate>campaignForm.save</span>
            </button>
            <button type="button" class="btn btn-default backToGame" ui-sref="dcm.home">
                <span translate>check.link.back</span>
            </button>
        </div>

        <health-coach></health-coach>
    </section>

</div>




