<div class="three-column-layout">


    <section>
        <organization-card organization="organization"></organization-card>
    </section>

    <section>

        <div class="organization">

            <div class="row">
                <div class="col-md-10">

                    <form name="organizationForm" ypModel="organization" class="form-horizontal" role="form" novalidate
                          ng-submit="saveOrganization()">


                        <div class="main-header">
                            <span translate>organizationForm.header</span>
                        </div>

                        <yp-input name="name"></yp-input>
                        <yp-input name="address.street"></yp-input>

                        <yp-input name="address.zipCode" ng-pattern="/\d{3,}/"></yp-input>
                        <yp-input name="address.city"></yp-input>

                        <div class="form-group">
                            <label translate>organizationForm.legalForm.label</label>
                            <select class="form-control" ng-model="organization.legalForm" ng-options="item.key as item.value for item in localizedValues('organization.legalForm.', 7)"></select>
                        </div>


                        <div class="form-group">
                            <label translate>organizationForm.sector.label</label>
                            <select class="form-control sector" ng-model="organization.sector" ng-options="item.key as item.value for item in localizedValues('organization.sector.', 38)"></select>

                            <input class="form-control sector"
                                   type="text"

                                   ng-model="sectorSearchModel"
                                   typeahead-min-length="0"
                                   placeholder="{{ 'organizationForm.sector.placeholder' | translate }}"
                                   typeahead="item.key as item.value for item in (localizedValues('organization.sector.', 38) | filter:$viewValue | limitTo:10)"
                                   typeahead-on-select="organization.sector = $item.key; sectorSearchModel = ''"

                                    >
                        </div>

                        <div class="main-header">
                            <span translate>organizationForm.contact.header</span>
                        </div>

                        <yp-input name="user.firstname" required></yp-input>
                        <yp-input name="user.lastname" required></yp-input>

                        <yp-input name="contact.position"></yp-input>
                        <yp-input name="user.email" required></yp-input>
                        <yp-input name="contact.phone"></yp-input>

                    </form>

                </div>
            </div>
        </div>

    </section>

    <section>

        <div class="box">

            <button class="btn btn-default backToGame" ui-sref="dcm.home" translate>
                activity.link.back
            </button>

            <button type="submit" class="submit btn btn-primary"
                    ng-disabled="organizationForm.$invalid || !organizationForm.$dirty"
                    ng-click="saveOrganization()">
                <span translate ng-if="!organization.id">organizationForm.create</span>
                <span translate ng-if="organization.id">organizationForm.save</span>
            </button>

        </div>

        <div ng-show="missingOrganizationFields.length > 0">

            <h5 translate>organizationForm.missingOrganizationFieldsWarning.header</h5>
            <p translate>organizationForm.missingOrganizationFieldsWarning.text</p>

            <ul>
                <li ng-repeat="field in missingOrganizationFields">
                    {{ 'organizationForm.' + field + '.label' | translate }}
                </li>
            </ul>

        </div>

    </section>

</div>